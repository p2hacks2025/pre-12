package batch

import (
	"context"
	"log"
	"strings"

	"github.com/p2hacks2025/pre-12/backend/internal/db"
)

// InsertDummyWorks は works テーブルにダミーデータを挿入する関数
func InsertDummyWorks() {
	works := []struct {
		UserEmail   string
		ImageFile   string // ファイル名だけ
		Title       string
		Description string
	}{
		{"user_001@example.com", "user_001.png", "大学と夕焼け", "広がる夕焼けを背景に、大学のキャンパスが静かに佇む風景。"},
		{"user_002@example.com", "user_002.png", "海と赤レンガ", "青い海を背に、歴史を感じさせる赤レンガの建物が並ぶ風景。"},
		{"user_003@example.com", "user_003.png", "坂から見る景色", "緩やかな坂の上から見下ろす街並みや自然が広がる景色。"},
		{"user_004@example.com", "user_004.png", "夜のビル", "夜空に輝く明かりをまとった高層ビルが立ち並ぶ都市の風景。"},
		{"user_005@example.com", "user_005.png", "クリスマスの日の家", "クリスマスの装飾が彩る家が、暖かい光に包まれて佇む風景。"},
		{"user_006@example.com", "user_006.png", "夜のスカイツリー", "夜空にライトアップされ、幻想的に輝くスカイツリーの姿。"},
		{"user_007@example.com", "user_007.png", "夜の街", "街灯やネオンがきらめく、夜の都市のにぎやかな風景。"},
		{"user_008@example.com", "user_008.png", "共通テスト本番", "緊張感に包まれた会場で、受験生たちが共通テストに挑む様子。"},
		{"user_009@example.com", "user_009.png", "静かな大学の室内", "柔らかな光が差し込む、静かで落ち着いた大学の室内空間。"},
		{"user_010@example.com", "user_010.png", "大学の廊下", "光が差し込む長い大学の廊下が、静かに延びる風景。"},
		{"user_011@example.com", "user_011.png", "ローストビーフ丼", "ジューシーなローストビーフがたっぷりのった、ご飯の上の贅沢な丼。"},
		{"user_012@example.com", "user_012.png", "水たまりと夜の街", "雨上がりの水たまりにネオンや街灯が映り込み、夜の街が幻想的に輝く風景。"},
		{"user_013@example.com", "user_013.png", "ホットコーヒ", "湯気が立ち上る、香り豊かなホットコーヒーの一杯。"},
		{"user_014@example.com", "user_014.png", "猫とわたし", "そっと寄り添う猫と私が、穏やかな時間を過ごす風景。"},
		{"user_015@example.com", "user_015.png", "クリスマスツリーと家", "クリスマスツリーの明かりが輝く、飾り付けられた家の温かい風景。"},
		{"user_016@example.com", "user_016.png", "ゆきだるま", "雪に囲まれて微笑む、可愛らしいゆきだるま。"},
		{"user_017@example.com", "user_017.png", "川とスカイツリー", "穏やかに流れる川の向こうに、そびえ立つスカイツリーが見える風景。"},
		{"user_018@example.com", "user_018.png", "五稜郭海辺", "五稜郭の星形の城郭と、穏やかな海が広がる景色。"},
		{"user_019@example.com", "user_019.png", "秋のお寺", "色づいた紅葉に囲まれ、静かに佇む秋のお寺の風景。"},
		{"user_020@example.com", "user_020.png", "イギリスの建物", "歴史を感じさせる石造りの外観が特徴的な、イギリスの建物。"},
		{"user_021@example.com", "user_021.png", "ラスベガス", "ネオンがきらめき、エンターテインメントで賑わうラスベガスの夜景。"},
		{"user_022@example.com", "user_022.png", "東京タワー", "日本の東京都港区にそびえる、象徴的な東京タワーの風景。"},
		{"user_023@example.com", "user_023.png", "スクランブル交差点", "多くの人々が行き交う、活気あふれるスクランブル交差点の光景。"},
		{"user_024@example.com", "user_024.png", "猫耳フードをかぶった女の子", "猫耳フードをかぶり、可愛らしい雰囲気の女の子。"},
		{"user_025@example.com", "user_025.png", "清水寺と女の子", "清水寺を背景に、笑顔の女の子が佇む風景。"},
		{"user_026@example.com", "user_026.png", "田んぼ", "緑に輝く田んぼが広がる、のどかな田園風景。"},
		{"user_027@example.com", "user_027.png", "落ち着いた季節", "深い緑の層が広がり、にじむ光が奥行きを生む。記憶の断片を丁寧に拾い上げ、輪郭をぼかし、構図を整え、視線が流れるように仕上げた。"},
		{"user_028@example.com", "user_028.png", "静かな森", "深い緑の層が広がり、柔らかな反射が画面を包む。心の奥に残る景色を掬い上げ、色の層を重ねて空気感を整えた。"},
		{"user_029@example.com", "user_029.png", "繊細な光", "淡い黄の光が満ち、にじむ光が奥行きを生む。光と影の対話を形にしたくて、細やかな筆致を重ね、構図を整え、視線が流れるように仕上げた。明るい光が画面全体に広がる。"},
		{"user_030@example.com", "user_030.png", "繊細な季節", "深い緑の層が広がり、柔らかな反射が画面を包む。呼吸のリズムに合わせて色調を整え、余白を活かして奥行きを描いた。明るい光が画面全体に広がる。"},
		{"user_031@example.com", "user_031.png", "落ち着いた季節", "深い緑の層が広がり、きらめきが静かな余韻を残す。呼吸のリズムに合わせて色調を整え、輪郭をぼかし、構図を整え、視線が流れるように仕上げた。"},
		{"user_032@example.com", "user_032.png", "深い風景", "深い緑の層が広がり、きらめきが静かな余韻を残す。移ろう時間の一瞬を留めたいと思い、余白を活かして奥行きを描いた。"},
		{"user_033@example.com", "user_033.png", "静かな季節", "深い緑の層が広がり、きらめきが静かな余韻を残す。心の奥に残る景色を掬い上げ、輪郭をぼかし、陰影のバランスを調整し、静かな広がりを作った。"},
		{"user_034@example.com", "user_034.png", "繊細な風景", "淡い無彩色のトーンが溶け合い、きらめきが静かな余韻を残す。移ろう時間の一瞬を留めたいと思い、細やかな筆致を重ね、色の層を重ねて空気感を整えた。"},
		{"user_035@example.com", "user_035.png", "やわらかな光", "淡い無彩色のトーンが溶け合い、きらめきが静かな余韻を残す。静けさの中で生まれた感情を写し取りたくて、細やかな筆致を重ね、余白を活かして奥行きを描いた。"},
		{"user_036@example.com", "user_036.png", "落ち着いた風景", "深い緑の層が広がり、粒子のような光が浮かび上がる。静けさの中で生まれた感情を写し取りたくて、輪郭をぼかし、色の層を重ねて空気感を整えた。"},
		{"user_037@example.com", "user_037.png", "静かな風景", "深い緑の層が広がり、きらめきが静かな余韻を残す。静けさの中で生まれた感情を写し取りたくて、輪郭をぼかし、余白を活かして奥行きを描いた。"},
		{"user_038@example.com", "user_038.png", "静かな季節", "深い緑の層が広がり、にじむ光が奥行きを生む。記憶の断片を丁寧に拾い上げ、余白を活かして奥行きを描いた。"},
		{"user_039@example.com", "user_039.png", "落ち着いた森", "深い緑の層が広がり、淡い輝きが静かに揺れる。光と影の対話を形にしたくて、余白を活かして奥行きを描いた。"},
		{"user_040@example.com", "user_040.png", "穏やかな季節", "深い緑の層が広がり、粒子のような光が浮かび上がる。記憶の断片を丁寧に拾い上げ、輪郭をぼかし、陰影のバランスを調整し、静かな広がりを作った。"},
		{"user_041@example.com", "user_041.png", "静かな水辺", "青緑のグラデーションが広がり、細い光の筋が流れる。光と影の対話を形にしたくて、輪郭をぼかし、陰影のバランスを調整し、静かな広がりを作った。"},
		{"user_042@example.com", "user_042.png", "静かな水辺", "青緑のグラデーションが広がり、にじむ光が奥行きを生む。記憶の断片を丁寧に拾い上げ、輪郭をぼかし、陰影のバランスを調整し、静かな広がりを作った。"},
		{"user_043@example.com", "user_043.png", "静かな夜の光", "深い緑の層が広がり、にじむ光が奥行きを生む。移ろう時間の一瞬を留めたいと思い、細やかな筆致を重ね、陰影のバランスを調整し、静かな広がりを作った。暗部に灯りが点在し、夜の気配が滲む。"},
		{"user_044@example.com", "user_044.png", "穏やかな森", "深い緑の層が広がり、粒子のような光が浮かび上がる。記憶の断片を丁寧に拾い上げ、構図を整え、視線が流れるように仕上げた。"},
		{"user_045@example.com", "user_045.png", "落ち着いた季節", "深い緑の層が広がり、にじむ光が奥行きを生む。記憶の断片を丁寧に拾い上げ、輪郭をぼかし、色の層を重ねて空気感を整えた。"},
		{"user_046@example.com", "user_046.png", "静かな風景", "深い緑の層が広がり、にじむ光が奥行きを生む。光と影の対話を形にしたくて、輪郭をぼかし、余白を活かして奥行きを描いた。"},
		{"user_047@example.com", "user_047.png", "穏やかな森", "深い緑の層が広がり、にじむ光が奥行きを生む。移ろう時間の一瞬を留めたいと思い、細やかな筆致を重ね、陰影のバランスを調整し、静かな広がりを作った。"},
		{"user_048@example.com", "user_048.png", "まばゆい夜空", "澄んだ青の余韻が満ち、にじむ光が奥行きを生む。心の奥に残る景色を掬い上げ、輪郭をぼかし、余白を活かして奥行きを描いた。"},
		{"user_049@example.com", "user_049.png", "繊細な風景", "深い緑の層が広がり、淡い輝きが静かに揺れる。静けさの中で生まれた感情を写し取りたくて、細やかな筆致を重ね、余白を活かして奥行きを描いた。明るい光が画面全体に広がる。"},
		{"user_050@example.com", "user_050.png", "穏やかな風景", "深い緑の層が広がり、柔らかな反射が画面を包む。静けさの中で生まれた感情を写し取りたくて、輪郭をぼかし、色の層を重ねて空気感を整えた。"},
		{"user_051@example.com", "user_051.png", "やわらかな風景", "淡い黄の光が満ち、きらめきが静かな余韻を残す。静けさの中で生まれた感情を写し取りたくて、細やかな筆致を重ね、色の層を重ねて空気感を整えた。明るい光が画面全体に広がる。"},
		{"user_052@example.com", "user_052.png", "淡い季節", "深い緑の層が広がり、粒子のような光が浮かび上がる。移ろう時間の一瞬を留めたいと思い、輪郭をぼかし、余白を活かして奥行きを描いた。明るい光が画面全体に広がる。"},
		{"user_053@example.com", "user_053.png", "落ち着いた海", "青緑のグラデーションが広がり、淡い輝きが静かに揺れる。呼吸のリズムに合わせて色調を整え、細やかな筆致を重ね、構図を整え、視線が流れるように仕上げた。"},
		{"user_054@example.com", "user_054.png", "穏やかな風景", "深い緑の層が広がり、柔らかな反射が画面を包む。光と影の対話を形にしたくて、輪郭をぼかし、構図を整え、視線が流れるように仕上げた。"},
		{"user_055@example.com", "user_055.png", "鮮やかな水辺", "青緑のグラデーションが広がり、にじむ光が奥行きを生む。心の奥に残る景色を掬い上げ、輪郭をぼかし、色の層を重ねて空気感を整えた。"},
		{"user_056@example.com", "user_056.png", "静かな海", "澄んだ青の余韻が満ち、細い光の筋が流れる。光と影の対話を形にしたくて、余白を活かして奥行きを描いた。"},
		{"user_057@example.com", "user_057.png", "深い海", "澄んだ青の余韻が満ち、きらめきが静かな余韻を残す。光と影の対話を形にしたくて、輪郭をぼかし、構図を整え、視線が流れるように仕上げた。"},
		{"user_058@example.com", "user_058.png", "静かな森", "深い緑の層が広がり、粒子のような光が浮かび上がる。静けさの中で生まれた感情を写し取りたくて、陰影のバランスを調整し、静かな広がりを作った。"},
		{"user_059@example.com", "user_059.png", "深い雨", "澄んだ青の余韻が満ち、にじむ光が奥行きを生む。静けさの中で生まれた感情を写し取りたくて、輪郭をぼかし、構図を整え、視線が流れるように仕上げた。"},
		{"user_060@example.com", "user_060.png", "落ち着いた風景", "青緑のグラデーションが広がり、淡い輝きが静かに揺れる。呼吸のリズムに合わせて色調を整え、輪郭をぼかし、余白を活かして奥行きを描いた。"},
		{"user_061@example.com", "user_061.png", "深い風景", "紫がかった陰影が漂い、淡い輝きが静かに揺れる。移ろう時間の一瞬を留めたいと思い、輪郭をぼかし、色の層を重ねて空気感を整えた。"},
		{"user_062@example.com", "user_062.png", "ひそやかな雨", "澄んだ青の余韻が満ち、淡い輝きが静かに揺れる。移ろう時間の一瞬を留めたいと思い、輪郭をぼかし、構図を整え、視線が流れるように仕上げた。"},
		{"user_063@example.com", "user_063.png", "淡い光", "淡い無彩色のトーンが溶け合い、粒子のような光が浮かび上がる。心の奥に残る景色を掬い上げ、細やかな筆致を重ね、余白を活かして奥行きを描いた。明るい光が画面全体に広がる。"},
		{"user_064@example.com", "user_064.png", "明るい風景", "深い緑の層が広がり、粒子のような光が浮かび上がる。心の奥に残る景色を掬い上げ、細やかな筆致を重ね、色の層を重ねて空気感を整えた。明るい光が画面全体に広がる。"},
		{"user_065@example.com", "user_065.png", "静かな光", "淡い黄の光が満ち、淡い輝きが静かに揺れる。静けさの中で生まれた感情を写し取りたくて、細やかな筆致を重ね、余白を活かして奥行きを描いた。"},
		{"user_066@example.com", "user_066.png", "繊細な光", "淡い黄の光が満ち、きらめきが静かな余韻を残す。呼吸のリズムに合わせて色調を整え、構図を整え、視線が流れるように仕上げた。"},
		{"user_067@example.com", "user_067.png", "淡い静物", "淡い無彩色のトーンが溶け合い、にじむ光が奥行きを生む。呼吸のリズムに合わせて色調を整え、構図を整え、視線が流れるように仕上げた。"},
		{"user_068@example.com", "user_068.png", "落ち着いた都市夜景", "夕焼けのような橙が重なり、粒子のような光が浮かび上がる。呼吸のリズムに合わせて色調を整え、余白を活かして奥行きを描いた。"},
		{"user_069@example.com", "user_069.png", "淡い光", "淡い黄の光が満ち、淡い輝きが静かに揺れる。心の奥に残る景色を掬い上げ、細やかな筆致を重ね、余白を活かして奥行きを描いた。明るい光が画面全体に広がる。"},
		{"user_070@example.com", "user_070.png", "三万円のラーメン", "今日も負けてしまった。これは、三万円のラーメンだ。そう、自分に言い聞かせる彼。彼はまた明日、挑戦するだろう。"},
		{"user_071@example.com", "user_071.png", "卒業", "彼は今日、卒業する。新しい世界へ踏み出すその一歩は、不安と期待が入り混じる。でも、彼女は信じている。未来は自分の手で切り開けると。"},
		{"user_072@example.com", "user_072.png", "ゲーム", "彼はゲームの中で新たな冒険を始める。未知の世界で仲間と出会い、困難に立ち向かう。その旅路は、彼にとって現実以上に輝いている。"},
		{"user_073@example.com", "user_073.png", "数学", "数学は彼女の世界を広げる鍵だ。数式の背後に隠された美しさを見つけ出し、論理の迷路を解き明かす。その過程で、彼女は自分自身も成長していく。"},
		{"user_074@example.com", "user_074.png", "あの頃", "あの頃を思い出す。彼女の心はもう離れてしまっているけれど、思い出は色褪せない。過ぎ去った時間の中で、彼女は何を感じ、何を学んだのだろうか。"},
		{"user_075@example.com", "user_075.png", "異世界", "彼は異世界に迷い込んだ。見知らぬ土地で新たな文化や生き物に出会い、驚きと興奮が交錯する。しかし、彼は自分の居場所を見つけるために、勇気を持って前に進む決意をする。"},
		{"user_076@example.com", "user_076.png", "終末", "紫の光に包まれた世界は、終末を迎えようとしている。彼女はその中で希望の光を見つけ出そうとする。絶望の中でも、人は未来を信じる力を持っているのだと。"},
		{"user_077@example.com", "user_077.png", "春", "春の風に身を任せて、彼女は新たな始まりを感じる。花が咲き誇り、命が芽吹く季節。彼女もまた、自分の人生に新しい色を加えようとしている。"},
		{"user_078@example.com", "user_078.png", "秋", "そして全てをなくした。そして、あなたをなくした。そして、翼をなくした。秋の風が冷たく吹き抜ける中で、彼は失ったものの大きさを噛み締めていた。"},
		{"user_079@example.com", "user_079.png", "Heven", "彼女は天国にいる。そこは痛みも悲しみもない場所。彼女はそこで永遠の安らぎを見つけた。しかし、彼女の心はまだ地上に残る愛する人々を思い続けている。"},
		{"user_080@example.com", "user_080.png", "淡い森", "深い緑の層が広がり、にじむ光が奥行きを生む。心の奥に残る景色を掬い上げ、輪郭をぼかし、色の層を重ねて空気感を整えた。"},
		{"user_081@example.com", "user_081.png", "天空の城", "澄んだ青の余韻が満ち、淡い輝きが静かに揺れる。光と影の対話を形にしたくて、細やかな筆致を重ね、構図を整え、視線が流れるように仕上げた。明るい光が画面全体に広がる。"},
		{"user_082@example.com", "user_082.png", "サイバー2060", "紫がかった陰影が漂い、にじむ光が奥行きを生む。記憶の断片を丁寧に拾い上げ、輪郭をぼかし、余白を活かして奥行きを描いた。"},
		{"user_083@example.com", "user_083.png", "EverGreen", "深い緑の層が広がり、柔らかな反射が画面を包む。光と影の対話を形にしたくて、構図を整え、視線が流れるように仕上げた。"},
		{"user_084@example.com", "user_084.png", "衰退", "淡い無彩色のトーンが溶け合い、粒子のような光が浮かび上がる。静けさの中で生まれた感情を写し取りたくて、細やかな筆致を重ね、構図を整え、視線が流れるように仕上げた。"},
		{"user_085@example.com", "user_085.png", "森", "青緑のグラデーションが広がり、細い光の筋が流れる。移ろう時間の一瞬を留めたいと思い、色の層を重ねて空気感を整えた。"},
		{"user_086@example.com", "user_086.png", "始まりの場所", "いつだろうか、彼女と共に過ごしたあの場所に戻りたいと思うようになったのは。あの日々の記憶が、彼女の心を優しく包み込む。"},
		{"user_087@example.com", "user_087.png", "失恋", "夕方の海辺で一人、彼は過ぎ去った恋を思い出す。波の音が心に響き、切なさが胸を締め付ける。しかし、彼は前を向く決意を新たにする。"},
		{"user_088@example.com", "user_088.png", "決意", "彼は新たな挑戦に向けて決意を固める。過去の失敗や挫折を乗り越え、自分自身を信じて前進する。その姿勢が、彼に未来への希望をもたらす。"},
		{"user_089@example.com", "user_089.png", "土管", "緑の土管から飛び出る赤い服の彼。彼の冒険はまだ始まったばかり。未知の世界で彼は何を見つけ、どんな成長を遂げるのだろうか。"},
		{"user_090@example.com", "user_090.png", "天空", "澄んだ青の余韻が満ち、淡い輝きが静かに揺れる。心の奥に残る景色を掬い上げ、輪郭をぼかし、色の層を重ねて空気感を整えた。明るい光が画面全体に広がる。"},
		{"user_091@example.com", "user_091.png", "衰退", "深い緑の層が広がり、にじむ光が奥行きを生む。静けさの中で生まれた感情を写し取りたくて、輪郭をぼかし、余白を活かして奥行きを描いた。"},
		{"user_092@example.com", "user_092.png", "可憐", "澄んだ青の余韻が満ち、細い光の筋が流れる。呼吸のリズムに合わせて色調を整え、輪郭をぼかし、余白を活かして奥行きを描いた。"},
		{"user_093@example.com", "user_093.png", "ラスボス", "戦いは終わった。彼は最後の敵を倒し、勝利を手にした。しかし、その心には新たな挑戦への渇望が芽生えていた。彼の冒険はまだ終わらない。"},
		{"user_094@example.com", "user_094.png", "平和", "青緑のグラデーションが広がり、淡い輝きが静かに揺れる。記憶の断片を丁寧に拾い上げ、色の層を重ねて空気感を整えた。"},
		{"user_095@example.com", "user_095.png", "穏やかな風景", "青緑のグラデーションが広がり、柔らかな反射が画面を包む。静けさの中で生まれた感情を写し取りたくて、輪郭をぼかし、構図を整え、視線が流れるように仕上げた。"},
		{"user_096@example.com", "user_096.png", "風に吹かれて", "青緑のグラデーションが広がり、きらめきが静かな余韻を残す。記憶の断片を丁寧に拾い上げ、細やかな筆致を重ね、余白を活かして奥行きを描いた。"},
		{"user_097@example.com", "user_097.png", "城", "澄んだ青の余韻が満ち、淡い輝きが静かに揺れる。光と影の対話を形にしたくて、細やかな筆致を重ね、色の層を重ねて空気感を整えた。明るい光が画面全体に広がる。"},
		{"user_098@example.com", "user_098.png", "あなた", "あなたは澄んだ池を見つめるのが好きだった。そこに映る自分の姿を見つめながら、彼女は何を思い、何を感じていたのだろうか。"},
		{"user_099@example.com", "user_099.png", "ストリート", "賑やかな店主の声が響く市場の一角で、彼は新鮮な食材を選んでいた。色とりどりの野菜や果物が並び、活気に満ちた空間が広がっている。"},
		{"user_100@example.com", "user_100.png", "出会い", "出会いはここだった。彼は初めて彼女と目が合った瞬間を思い出す。あの時の胸の高鳴りは、今でも鮮明に蘇る。"},
	}

	ctx := context.Background()
	for _, w := range works {
		// user_id を取得
		var userID string
		err := db.Pool.QueryRow(ctx, "SELECT id FROM public.users WHERE email = $1", w.UserEmail).Scan(&userID)
		if err != nil {
			log.Printf("failed to get user id for %s: %v", w.UserEmail, err)
			continue
		}

		// image_path を works/{userID}/{filename} にする
		imagePath := strings.Join([]string{"works", userID, w.ImageFile}, "/")

		// works テーブルに挿入
		_, err = db.Pool.Exec(
			ctx,
			`INSERT INTO public.works (user_id, image_path, title, description)
			 VALUES ($1, $2, $3, $4)
			 ON CONFLICT (user_id, image_path) DO NOTHING`,
			userID, imagePath, w.Title, w.Description,
		)
		if err != nil {
			log.Printf("failed to insert work for %s: %v", w.UserEmail, err)
			continue
		}

		log.Printf("inserted work for user: %s, title: %s, image_path: %s", w.UserEmail, w.Title, imagePath)
	}
}
